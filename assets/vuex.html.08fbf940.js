import{_ as n,o as s,c as a,d as t}from"./app.fbdceb87.js";const e={},p=t(`<h3 id="vuex" tabindex="-1"><a class="header-anchor" href="#vuex" aria-hidden="true">#</a> vuex</h3><h4 id="vuex\u6709\u54EA\u4E9B\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#vuex\u6709\u54EA\u4E9B\u5C5E\u6027" aria-hidden="true">#</a> vuex\u6709\u54EA\u4E9B\u5C5E\u6027\uFF1F</h4><ul><li><code>state</code>\uFF1A\u5168\u5C40\u5171\u4EAB\u5C5E\u6027</li><li><code>getters</code>\uFF1A\u9488\u5BF9state\u6570\u636E\u8FDB\u884C\u4E8C\u6B21\u8BA1\u7B97</li><li><code>mutations</code>:\u5B58\u653E\u540C\u6B65\u65B9\u6CD5</li><li><code>actions</code>:\u5B58\u653E\u5F02\u6B65\u65B9\u6CD5\uFF0C\u7528\u6765commit mutation\u7684</li><li><code>modules</code>: \u628Avuex\u518D\u6B21\u8FDB\u884C\u6A21\u5757\u4E4B\u95F4\u7684\u5212\u5206</li></ul><h4 id="vuex\u4F7F\u7528state\u503C" tabindex="-1"><a class="header-anchor" href="#vuex\u4F7F\u7528state\u503C" aria-hidden="true">#</a> vuex\u4F7F\u7528state\u503C</h4><ul><li><p><code>this.$store.state.xxx</code></p></li><li><p><code>...mapState[&#39;key&#39;]</code></p></li></ul><p>\u90FD\u53EF\u4EE5\u62FF\u5230<code>state</code>\uFF0C\u533A\u522B\u5728\u4E8E</p><ul><li>\u7B2C\u4E00\u79CD\u76F8\u5BF9\u4E8E\u76F4\u63A5\u7528store\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539state\u7684\u503C</li><li>\u7B2C\u4E8C\u79CD\u76F8\u5F53\u4E8E\u590D\u5236\u4E86\u4E00\u4EFD\uFF0C\u4E0D\u80FD\u76F4\u63A5\u4FEE\u6539state\u7684\u503C\uFF0C\u4F1A\u62A5\u9519</li></ul><h4 id="vuex\u7684getters\u503C\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#vuex\u7684getters\u503C\u4FEE\u6539" aria-hidden="true">#</a> vuex\u7684getters\u503C\u4FEE\u6539</h4><p>\u4E0D\u53EF\u4FEE\u6539</p><p>\u5F53\u5229\u7528v-mode\u53CC\u5411\u7ED1\u5B9A\u65F6\uFF0C\u4E00\u65E6\u4FEE\u6539\u5C31\u4F1A\u62A5\u9519</p><h4 id="modules" tabindex="-1"><a class="header-anchor" href="#modules" aria-hidden="true">#</a> modules</h4><p>\u6A21\u5757\u5316\u7BA1\u7406index.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&#39;./Home&#39;</span>
<span class="token keyword">import</span> User <span class="token keyword">from</span> <span class="token string">&#39;./User&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MyProject <span class="token keyword">from</span> <span class="token string">&#39;./MyProject&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Community <span class="token keyword">from</span> <span class="token string">&#39;./Community&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> EditPage <span class="token keyword">from</span> <span class="token string">&#39;./EditPage&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        Home<span class="token punctuation">,</span>
        MyProject<span class="token punctuation">,</span>
        Community<span class="token punctuation">,</span>
        User<span class="token punctuation">,</span>
        EditPage<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F00\u542F\u547D\u540D\u7A7A\u95F4</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reqFormWork<span class="token punctuation">,</span> clickLike <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api&#39;</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u53D6\u8272\u76D8\u989C\u8272</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;#9ce5f4&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// \u6A21\u677F\u4E2D\u7684\u4FE1\u606F\u5217\u8868</span>
  <span class="token literal-property property">formWorkList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// \u8D5E\u7684\u989C\u8272</span>
  <span class="token literal-property property">colorList</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>


  <span class="token comment">// \u70B9\u8D5E</span>
  <span class="token constant">ADDLIKES</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(value);</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;mutations\u4E2D\u7684ADDLIKES\u88AB\u8C03\u7528\u4E86&#39;</span><span class="token punctuation">)</span>
    state<span class="token punctuation">.</span>formWorkList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>likenum <span class="token operator">+=</span> <span class="token number">1</span>
    state<span class="token punctuation">.</span>colorList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>colorList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>


<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//\u83B7\u53D6\u6A21\u677F\u5217\u8868\u4FE1\u606F</span>
  <span class="token keyword">async</span> <span class="token function">getFormWork</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;action\u4E2D\u7684getFormWork\u88AB\u8C03\u7528\u4E86&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">reqFormWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//\u6539\u53D8\u6A21\u677F\u5217\u8868\u4FE1\u606F</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;GETFORMWORK&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// \u6539\u53D8\u989C\u8272</span>
  <span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;action\u4E2D\u7684changeColor\u88AB\u8C03\u7528\u4E86&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> txtColor <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;CHANGECOLOR&#39;</span><span class="token punctuation">,</span> txtColor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>


<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  state<span class="token punctuation">,</span>
  mutations<span class="token punctuation">,</span>
  actions<span class="token punctuation">,</span>
  getters<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">&#39;module&#39;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&#39;sum&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;school&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="mutations\u548Cactions\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#mutations\u548Cactions\u7684\u533A\u522B" aria-hidden="true">#</a> mutations\u548Cactions\u7684\u533A\u522B</h4><ul><li>\u76F8\u540C\u70B9\uFF1Amutations\u548Cactions\u90FD\u662F\u7528\u6765\u5B58\u653E\u5168\u5C40\u65B9\u6CD5\u7684\uFF0C\u8FD9\u4E2A\u5168\u5C40\u65B9\u6CD5\u7684return\u503C\u62FF\u4E0D\u5230</li><li>\u533A\u522B\uFF1A <ul><li>mutations =\u300B \u540C\u6B65</li><li>actions =\u300B\u8FD4\u56DEpromise</li></ul></li><li>mutations\u7528\u6765\u4FEE\u6539state\uFF0Cactions\u63D0\u4EA4mutations</li></ul><h4 id="vuex\u4E0D\u662F\u6301\u4E45\u5316\u5B58\u50A8" tabindex="-1"><a class="header-anchor" href="#vuex\u4E0D\u662F\u6301\u4E45\u5316\u5B58\u50A8" aria-hidden="true">#</a> vuex\u4E0D\u662F\u6301\u4E45\u5316\u5B58\u50A8</h4><p>\u5728\u9875\u9762\u4E0A\u4F7F\u7528state\u7684\u503C1\uFF0C\u6539\u53D8\u503C\u540E\uFF0C\u5237\u65B0\u53C8\u53D8\u56DE1?</p><p>\u7B54\uFF1Avuex\u672C\u5C31\u4E0D\u662F\u6301\u4E45\u5316\u5B58\u50A8\uFF0C\u53EA\u662F\u4E00\u4E2A\u72B6\u6001\u7BA1\u7406\u4ED3\u5E93\u3002</p><p>\u5B9E\u73B0\u6301\u4E45\u5316\uFF08\u672C\u8D28\u4E0A\u539F\u7406\u76F8\u540C</p><ul><li>\u5229\u7528<code>localStorage</code>\u3001<code>cookie</code>\u7B49</li><li>\u4F7F\u7528<code>vuex-persistedstate</code>\u63D2\u4EF6</li></ul>`,23),o=[p];function c(i,l){return s(),a("div",null,o)}const r=n(e,[["render",c],["__file","vuex.html.vue"]]);export{r as default};
